import re

# 定义原始 masked_poem_dict
masked_poem_dict = {
    "五言绝句": [
        ".{5}，.{5}。",
        ".{5}，.{5}。",
    ],
    "七言绝句": [
        ".{7}，.{7}。",
        ".{7}，.{7}。",
    ],
    "五言律诗": [
        ".{5}，.{5}。",
        ".{5}，.{5}。",
        ".{5}，.{5}。",
        ".{5}，.{5}。",
    ],
    "七言律诗": [
        ".{7}，.{7}。",
        ".{7}，.{7}。",
        ".{7}，.{7}。",
        ".{7}，.{7}。",
    ],
    "减字木兰花": [
        ".{4}。",
        ".{7}。",
        ".{4}。",
        ".{7}。",
        ".{4}。",
        ".{7}。",
        ".{4}。",
        ".{7}。",
    ],
    "满江红": [
        ".{4}，.{3}、.{4}。",
        ".{3}、.{4}，.{4}。",
        ".{7}，.{7}。",
        ".{3}、.{5}，.{3}。",
        ".{3}，.{3}。",
        ".{3}，.{3}。",
        ".{5}，.{4}。",
        ".{7}，.{7}。",
        ".{3}、.{5}，.{3}。",
    ],
    "水调歌头": [
        ".{5}，.{5}。",
        ".{4}，.{7}。",
        ".{6}，.{6}，.{5}。",
        ".{5}，.{5}。",
        ".{3}，.{3}，.{3}。",
        ".{4}，.{7}。",
        ".{6}，.{6}，.{5}。",
        ".{5}，.{5}。",
    ],
    "蝶恋花": [
        ".{7}。",
        ".{4}，.{5}。",
        ".{7}。",
        ".{7}。",
        ".{7}。",
        ".{4}，.{5}。",
        ".{7}。",
        ".{7}。",
    ],
    "如梦令": [
        ".{6}。",
        ".{6}。",
        ".{5}，.{6}。",
        ".{2}。",
        ".{2}。",
        ".{6}。",
    ],
    "清平乐": [
        ".{4}。",
        ".{5}。",
        ".{7}。",
        ".{6}。",
        ".{6}。",
        ".{6}。",
        ".{6}，.{6}。",
    ],
    "沁园春": [
        ".{4}，.{4}，.{4}。",
        ".{5}，.{4}，.{4}，.{4}。",
        ".{4}，.{4}，.{7}。",
        ".{3}，.{5}，.{4}。",
        ".{2}。",
        ".{4}。",
        ".{8}。",
        ".{5}，.{4}，.{4}，.{4}。",
        ".{4}，.{4}，.{7}。",
        ".{3}，.{5}，.{4}。",
    ],
    "菩萨蛮": [
        ".{7}。",
        ".{7}。",
        ".{5}。",
        ".{5}。",
        ".{5}。",
        ".{5}。",
        ".{5}。",
        ".{5}。",
    ]
}

# 替换规则，将字数替换为 <|extra_1|>
def format_to_extra_1(pattern_list):
    formatted = []
    for pattern in pattern_list:
        # 将句中的 .{数字} 替换为对应数量的 <|extra_1|>
        line = re.sub(r"\.\{(\d+)\}", lambda m: "<|extra_1|>" * int(m.group(1)), pattern)
        formatted.append(line)
    # 拼接每行，加上换行符
    return "\\n".join(formatted)  # 使用 \\n 让字符串包含换行符

# 转换 masked_poem_dict
def transform_masked_poem_dict(masked_poem_dict):
    transformed_dict = {}
    for rhythmic, patterns in masked_poem_dict.items():
        transformed_dict[rhythmic] = format_to_extra_1(patterns)
    return transformed_dict

# 转换并打印结果
transformed_dict = transform_masked_poem_dict(masked_poem_dict)

# 打印结果
for rhythmic, formatted in transformed_dict.items():
    print(f"\"{rhythmic}\": \"{formatted}\",")